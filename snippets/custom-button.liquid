{% comment %}
  Custom Button Snippet - Reusable two-part button with sliding animation
  Parameters:
  - text: Button text (default: "Click Me")
  - type: Button type - "button", "submit", or "link" (default: "button")
  - url: URL for links (only used if type is "link")
  - target: Link target (only used if type is "link")
  - aria_label: Accessibility label (default: uses text)
  - class: Additional CSS classes
  - id: Optional ID for the button wrapper
  - style: Style variant - "dark" or "light" (default: "dark")
{% endcomment %}

{% assign button_text = text | default: 'Click Me' %}
{% assign button_type = type | default: 'button' %}
{% assign button_style = style | default: 'primary' %}
{% assign unique_id = id | default: section.id | default: 'default' | prepend: 'custom-btn-' %}

<div class="custom-button-wrapper-{{ unique_id }} custom-button-wrapper--{{ button_style }} {{ class }}">
  {% if button_type == 'link' %}
    <a
      href="{{ url | default: '#' }}"
      class="custom-button-text-{{ unique_id }}"
      {% if target %}
      target="{{ target }}"
      {% endif %}
      {% if aria_label %}
      aria-label="{{ aria_label }}"
      {% else %}
      aria-label="{{ button_text }}"
      {% endif %}>
      <span class="slide-wrapper">
        <span class="slide-text">{{ button_text }}</span>
        <span class="slide-text">{{ button_text }}</span>
      </span>
    </a>

    <a
      href="{{ url | default: '#' }}"
      class="custom-button-arrow-{{ unique_id }}"
      {% if target %}
      target="{{ target }}"
      {% endif %}
      aria-label="{{ aria_label | default: button_text }}">
      <span class="slide-wrapper">
        <span class="slide-arrow">
          <svg
            class="custom-button-arrow-icon-{{ unique_id }}"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round">
            <path d="M5 12h14M12 5l7 7-7 7" />
          </svg>
        </span>
        <span class="slide-arrow">
          <svg
            class="custom-button-arrow-icon-{{ unique_id }}"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round">
            <path d="M5 12h14M12 5l7 7-7 7" />
          </svg>
        </span>
      </span>
    </a>
  {% else %}
    <button
      type="{{ button_type }}"
      class="custom-button-text-{{ unique_id }}"
      {% if aria_label %}
      aria-label="{{ aria_label }}"
      {% else %}
      aria-label="{{ button_text }}"
      {% endif %}>
      <span class="slide-wrapper">
        <span class="slide-text">{{ button_text }}</span>
        <span class="slide-text">{{ button_text }}</span>
      </span>
    </button>

    <button
      type="{{ button_type }}"
      class="custom-button-arrow-{{ unique_id }}"
      aria-label="{{ aria_label | default: button_text }}">
      <span class="slide-wrapper">
        <span class="slide-arrow">
          <svg
            class="custom-button-arrow-icon-{{ unique_id }}"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round">
            <path d="M5 12h14M12 5l7 7-7 7" />
          </svg>
        </span>
        <span class="slide-arrow">
          <svg
            class="custom-button-arrow-icon-{{ unique_id }}"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round">
            <path d="M5 12h14M12 5l7 7-7 7" />
          </svg>
        </span>
      </span>
    </button>
  {% endif %}
</div>

<style>
  /* Wrapper + sizing (optional: tune heights in one place) */
  .custom-button-wrapper-{{ unique_id }} {
    --btn-h: 52px;
    /* set to 64px if you want taller */
    --arrow-w: 60px;
    display: flex;
    gap: 1rem;
    align-items: stretch;
  }

  .custom-button-text-{{ unique_id }} {
    height: var(--btn-h);
  }

  .custom-button-arrow-{{ unique_id }} {
    width: var(--arrow-w);
    height: var(--btn-h);
  }

  /* Slide animation structure */
  .custom-button-text-{{ unique_id }} .slide-wrapper
  , .custom-button-arrow-{{ unique_id }}
  .slide-wrapper {
    position: relative;
    display: block;
    width: 100%;
    height: 100%;
    /* use the parentâ€™s fixed height */
    overflow: hidden;
  }

  .custom-button-text-{{ unique_id }}
  .slide-text
  , .custom-button-arrow-{{ unique_id }}
  .slide-arrow {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.32s cubic-bezier(0.22, 0.61, 0.36, 1);
    will-change: transform;
    backface-visibility: hidden;
    transform: translateY(0);
    color: inherit;
  }

  /* BUGFIX: descendant space before .slide-text/.slide-arrow */
  .custom-button-text-{{ unique_id }}.slide-text:last-child,
  .custom-button-arrow-{{ unique_id }}.slide-arrow:last-child {
    transform: translateY(100%);
  }

  /* BUGFIX: no space before :hover */
  .custom-button-wrapper-{{ unique_id }}:hover .slide-text:first-child,
  .custom-button-wrapper-{{ unique_id }}:hover .slide-arrow:first-child {
    transform: translateY(-100%);
  }

  .custom-button-wrapper-{{ unique_id }}:hover .slide-text:last-child,
  .custom-button-wrapper-{{ unique_id }}:hover .slide-arrow:last-child {
    transform: translateY(0);
  }

  /* Hover colors (also needed the :hover fix) */
  .custom-button-wrapper-{{ unique_id }}: hover .custom-button-text-{{ unique_id }}
  , .custom-button-wrapper-{{ unique_id }}: hover .custom-button-arrow-{{ unique_id }} {
    background: #1a1a1a !important;
    color: #fff !important;
  }

  .custom-button-wrapper--light.custom-button-wrapper-{{ unique_id }}: hover .custom-button-text-{{ unique_id }}
  , .custom-button-wrapper--light.custom-button-wrapper-{{ unique_id }}: hover .custom-button-arrow-{{ unique_id }} {
    background: #f8f8f8 !important;
    color: #2a2a2a !important;
  }

</style>